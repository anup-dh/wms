{
 "blocks": "[\n  {\n    \"componentId\": \"root\",\n    \"componentName\": \"div\",\n    \"componentProps\": {},\n    \"componentSlots\": {},\n    \"componentEvents\": {},\n    \"blockName\": \"div\",\n    \"children\": [\n      {\n        \"componentId\": \"navbar-main\",\n        \"componentName\": \"navbar\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"navbar\",\n        \"children\": [],\n        \"baseStyles\": {\n          \"flexShrink\": 0,\n          \"width\": \"100%\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": [],\n        \"isStudioComponent\": true\n      },\n      {\n        \"componentId\": \"container-hx3j7lvwt\",\n        \"componentName\": \"container\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"container\",\n        \"children\": [\n          {\n            \"componentId\": \"customdialouge-sbppnnutk\",\n            \"componentName\": \"customdialouge\",\n            \"componentProps\": {\n              \"newvalue\": \"\",\n              \"warehouse_name\": \"{{ selectedItem[0].warehouse }}\",\n              \"current_qty\": \"{{ selectedItem[0].current_qty }}\",\n              \"iconImage\": \"{{ selectedItem[0].image}}\",\n              \"titleText\": \"{{ selectedItem[0].item_name}}\",\n              \"subTitleText\": \"{{ selectedItem[0].item_code}}\",\n              \"isOpen\": \"{{ isEditDialogOpen }}\",\n              \"newQty\": \"{{ newQuantity }}\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {\n              \"blur\": {\n                \"event\": \"blur\",\n                \"action\": \"Run Script\",\n                \"script\": \"// In the \\\"Run Script\\\" action for the \\\"document-created\\\" event\\nconst { doctype, docname } = event.detail;\\n\\nfrappe.call({\\n\u00a0 method: \\\"wms.api.api.submitDoc\\\", // Make sure this path is correct!\\n\u00a0 args: {\\n\u00a0 \u00a0 doctype: doctype,\\n\u00a0 \u00a0 docname: docname\\n\u00a0 },\\n\u00a0 callback: function(response) {\\n\u00a0 \u00a0 if (response.message) {\\n\u00a0 \u00a0 \u00a0 // \u2705 Use the new method from the documentation!\\n\u00a0 \u00a0 \u00a0 studio.showToast({\\n\u00a0 \u00a0 \u00a0 \u00a0 message: response.message,\\n\u00a0 \u00a0 \u00a0 \u00a0 type: \\\"success\\\" \\n\u00a0 \u00a0 \u00a0 });\\n\u00a0 \u00a0 \u00a0 // You can also close your dialog here if needed\\n\u00a0 \u00a0 \u00a0 // isEditDialogOpen.value = false;\\n\u00a0 \u00a0 }\\n\u00a0 },\\n\u00a0 error: function(err) {\\n\u00a0 \u00a0 // Also handle errors with a toast\\n\u00a0 \u00a0 studio.showToast({\\n\u00a0 \u00a0 \u00a0 \u00a0 title: \\\"Submission Failed\\\",\\n\u00a0 \u00a0 \u00a0 \u00a0 message: err.message,\\n\u00a0 \u00a0 \u00a0 \u00a0 type: \\\"error\\\"\\n\u00a0 \u00a0 \u00a0 });\\n\u00a0 }\\n});\"\n              }\n            },\n            \"blockName\": \"customdialouge\",\n            \"children\": [],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"row\",\n              \"justifyContent\": \"center\",\n              \"alignItems\": \"center\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {},\n            \"tabletStyles\": {},\n            \"visibilityCondition\": \"\",\n            \"classes\": [\n              \"\\\"shadow-xl\\\"\",\n              \"\\\"transition-all\\\"\",\n              \"\\\"duration-300\\\"\",\n              \"\\\"ease-in-out\\\"\",\n              \"\\\"{{ inputs.isOpen ? 'opacity-100 scale-100' : 'opacity-0 scale-95' }}\\\"\"\n            ],\n            \"isStudioComponent\": true\n          }\n        ],\n        \"baseStyles\": {\n          \"display\": \"flex\",\n          \"flexDirection\": \"column\",\n          \"flexShrink\": 0,\n          \"height\": \"fit-content\",\n          \"width\": \"100%\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\",\n          \"position\": \"absolute\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"visibilityCondition\": \"isEditDialogOpen\",\n        \"originalElement\": \"div\",\n        \"classes\": [\n          \"\\\"transition-opacity\\\"\",\n          \"\\\"duration-300\\\"\",\n          \"\\\"ease-in-out\\\"\",\n          \"\\\"{{ inputs.isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none' }}\\\"\"\n        ]\n      },\n      {\n        \"componentId\": \"main-content-area\",\n        \"componentName\": \"container\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"container\",\n        \"children\": [\n          {\n            \"componentId\": \"initial-search-view\",\n            \"componentName\": \"container\",\n            \"componentProps\": {\n              \"displayLogic\": \"return !page.variables.searchPerformed;\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {},\n            \"blockName\": \"container\",\n            \"children\": [\n              {\n                \"componentId\": \"TextBlock-4c5iojk6y\",\n                \"componentName\": \"TextBlock\",\n                \"componentProps\": {\n                  \"text\": \"Filter Bin by Warehouse Name.\",\n                  \"textColor\": \"text-gray-500\"\n                },\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"TextBlock\",\n                \"children\": [],\n                \"baseStyles\": {\n                  \"marginTop\": \"8px\",\n                  \"marginBottom\": \"24px\",\n                  \"height\": \"fit-content\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"marginTop\": \"8px\",\n                  \"marginRight\": \"0px\",\n                  \"marginBottom\": \"8px\",\n                  \"marginLeft\": \"0px\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              },\n              {\n                \"componentId\": \"TextInput-glx7nfh3r\",\n                \"componentName\": \"TextInput\",\n                \"componentProps\": {\n                  \"placeholder\": \"Enter Warehouse name to search...\",\n                  \"variant\": \"subtle\",\n                  \"modelValue\": {\n                    \"$type\": \"variable\",\n                    \"name\": \"searchWH\"\n                  }\n                },\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"TextInput\",\n                \"children\": [],\n                \"baseStyles\": {\n                  \"width\": \"100%\",\n                  \"maxWidth\": \"600px\",\n                  \"height\": \"fit-content\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {},\n                \"tabletStyles\": {},\n                \"classes\": []\n              }\n            ],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"column\",\n              \"alignItems\": \"center\",\n              \"justifyContent\": \"flex-start\",\n              \"flexGrow\": 1,\n              \"padding\": \"20px\",\n              \"height\": \"fit-content\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {\n              \"paddingTop\": \"10px\",\n              \"paddingBottom\": \"10px\",\n              \"paddingLeft\": \"20px\",\n              \"paddingRight\": \"20px\"\n            },\n            \"tabletStyles\": {},\n            \"classes\": []\n          },\n          {\n            \"componentId\": \"results-split-view\",\n            \"componentName\": \"container\",\n            \"componentProps\": {\n              \"displayLogic\": \"return page.variables.searchPerformed;\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {},\n            \"blockName\": \"container\",\n            \"children\": [\n              {\n                \"componentId\": \"manual-left-pane\",\n                \"componentName\": \"container\",\n                \"componentProps\": {},\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"container\",\n                \"children\": [\n                  {\n                    \"componentId\": \"container-xzph5zr37\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {},\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"container-v1vxv79e5\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-8bgtf3bak\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"text\": \"Warehouse List\",\n                              \"fontSize\": \"text-xl\",\n                              \"fontWeight\": \"font-semibold\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"padding\": \"16px\",\n                              \"borderBottomWidth\": \"1px\",\n                              \"borderColor\": \"#e5e7eb\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"padding\": \"5px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"column\",\n                          \"flexShrink\": 0,\n                          \"height\": \"fit-content\",\n                          \"width\": \"100%\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"justifyContent\": \"flex-start\",\n                          \"alignItems\": \"center\",\n                          \"flexWrap\": \"nowrap\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-qaanb1tpn\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"Repeater-4j64x6huj\",\n                            \"componentName\": \"Repeater\",\n                            \"componentProps\": {\n                              \"data\": \"{{ filteredWHList }}\",\n                              \"dataKey\": \"warehouse_name\",\n                              \"emptyStateMessage\": \"No matching warehouses found.\"\n                            },\n                            \"componentSlots\": {\n                              \"default\": {\n                                \"slotName\": \"default\",\n                                \"slotId\": \"Repeater-4j64x6huj:default\",\n                                \"slotContent\": [\n                                  {\n                                    \"componentId\": \"warehousecard-ys4z75zq0\",\n                                    \"componentName\": \"warehousecard\",\n                                    \"componentProps\": {\n                                      \"WarehouseName\": \"{{ dataItem.warehouse_name }}\",\n                                      \"totalQty\": \"{{ dataItem.itemCount }}\",\n                                      \"binsTotal\": \"{{ dataItem.binCount }}\"\n                                    },\n                                    \"componentSlots\": {},\n                                    \"componentEvents\": {\n                                      \"click\": {\n                                        \"event\": \"click\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"const thisWHmatchingBins = bins.data.filter(bin => \\n\u00a0 bin.warehouse === dataItem.name\\n);\\n\\nconst enrichedBins = thisWHmatchingBins.map(bin => {\\n\u00a0 // For each bin, find the corresponding item in the items dataset\\n\u00a0 const matchingItem = items.data.find(item => \\n\u00a0 \u00a0 item.item_code === bin.item_code\\n\u00a0 );\\n\\n\u00a0 // Return a new object that includes all original bin properties (...)\\n\u00a0 // plus the new item_name property.\\n\u00a0 return {\\n\u00a0 \u00a0 ...bin,\\n\u00a0 \u00a0 // Use a ternary operator: if an item is found, add its name, otherwise add null.\\n\u00a0 \u00a0 item_name: matchingItem ? matchingItem.item_name : null,\\n\u00a0 \u00a0 image: matchingItem ? matchingItem.image : null\\n\u00a0 };\\n});\\n\\nselectedWHbins.value = enrichedBins;\\n\\n// const totalQuantity = enrichedBins.reduce((sum, currentBin) => {\\n// \u00a0 return sum + (currentBin.actual_qty || 0);\\n// }, 0); \\n\\nselectedWH.value = dataItem;\\n// selectedWH.value.push({\\n// \u00a0 ...dataItem,\\n// \u00a0 total_qty : totalQuantity,\\n// \u00a0 total_bins: enrichedBins.length\\n// })\\nconsole.log(\\\"selected WH .value\\\", selectedWH.value)\\nconsole.log(\\\"------after clicking WH end----\\\")\\n\"\n                                      }\n                                    },\n                                    \"blockName\": \"warehousecard\",\n                                    \"children\": [],\n                                    \"baseStyles\": {\n                                      \"display\": \"flex\"\n                                    },\n                                    \"rawStyles\": {},\n                                    \"mobileStyles\": {\n                                      \"width\": \"180px\",\n                                      \"height\": \"auto\",\n                                      \"flexShrink\": 0,\n                                      \"fontSize\": \"text-sm\"\n                                    },\n                                    \"tabletStyles\": {},\n                                    \"visibilityCondition\": \"\",\n                                    \"classes\": [],\n                                    \"parentSlotName\": \"default\",\n                                    \"isStudioComponent\": true\n                                  }\n                                ],\n                                \"parentBlockId\": \"Repeater-4j64x6huj\"\n                              }\n                            },\n                            \"componentEvents\": {},\n                            \"blockName\": \"Repeater\",\n                            \"children\": [],\n                            \"baseStyles\": {},\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"display\": \"flex\",\n                              \"flexDirection\": \"row\",\n                              \"flexWrap\": \"nowrap\",\n                              \"overflowX\": \"auto\",\n                              \"gap\": \"16px\",\n                              \"padding\": \"16px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"column\",\n                          \"flexShrink\": 0,\n                          \"overflow\": \"hidden\",\n                          \"position\": \"static\",\n                          \"height\": \"fit-content\",\n                          \"width\": \"100%\",\n                          \"paddingTop\": \"20px\",\n                          \"paddingRight\": \"20px\",\n                          \"paddingBottom\": \"200px\",\n                          \"paddingLeft\": \"20px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"paddingTop\": \"0px\",\n                          \"paddingRight\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"0px\",\n                          \"overflowY\": \"visible\",\n                          \"height\": \"auto\",\n                          \"alignItems\": \"stretch\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"flexDirection\": \"column\",\n                      \"overflowY\": \"auto\",\n                      \"justifyContent\": \"flex-start\",\n                      \"alignItems\": \"center\",\n                      \"height\": \"100%\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {\n                      \"flexDirection\": \"column\"\n                    },\n                    \"tabletStyles\": {},\n                    \"classes\": []\n                  }\n                ],\n                \"baseStyles\": {\n                  \"width\": \"45%\",\n                  \"flexShrink\": 0,\n                  \"borderRight\": \"1px solid #e5e7eb\",\n                  \"display\": \"flex\",\n                  \"flexDirection\": \"column\",\n                  \"height\": \"100%\",\n                  \"overflowY\": \"auto\",\n                  \"minHeight\": \"0\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"display\": \"flex\",\n                  \"width\": \"100%\",\n                  \"height\": \"auto\",\n                  \"borderRight\": \"none\",\n                  \"borderBottom\": \"1px solid #e5e7eb\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              },\n              {\n                \"componentId\": \"manual-right-pane\",\n                \"componentName\": \"container\",\n                \"componentProps\": {},\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"container\",\n                \"children\": [\n                  {\n                    \"componentId\": \"container-u5xpssspq\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {\n                      \"displayLogic\": \"return !page.variables.selectedItem\"\n                    },\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"TextBlock-rx9fgp639\",\n                        \"componentName\": \"TextBlock\",\n                        \"componentProps\": {\n                          \"text\": \"Select a warehouse on left to see items.\",\n                          \"textColor\": \"text-gray-500\"\n                        },\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"TextBlock\",\n                        \"children\": [],\n                        \"baseStyles\": {},\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {},\n                        \"tabletStyles\": {},\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"alignItems\": \"center\",\n                      \"justifyContent\": \"center\",\n                      \"padding\": \"40px\",\n                      \"height\": \"fit-content\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {},\n                    \"tabletStyles\": {},\n                    \"visibilityCondition\": \"selectedWH ? false : true\",\n                    \"classes\": []\n                  },\n                  {\n                    \"componentId\": \"container-yj017vyif\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {},\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"container-qsrds94rb\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-wdy5a7zn5\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"text\": \"Items for Warehouse: {{ selectedWH[0].warehouse_name }}\",\n                              \"fontSize\": \"text-lg\",\n                              \"fontWeight\": \"font-medium\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"fontSize\": \"text-xl\",\n                              \"fontWeight\": \"font-bold\",\n                              \"borderBottomWidth\": \"1px\",\n                              \"borderColor\": \"#e5e7eb\",\n                              \"flexShrink\": 0,\n                              \"width\": \"fit-content\",\n                              \"padding\": \"10px\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"fontSize\": \"text-lg\",\n                              \"fontWeight\": \"font-bold\",\n                              \"flexShrink\": 1\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          },\n                          {\n                            \"componentId\": \"Badge-mmnfm85dz\",\n                            \"componentName\": \"Badge\",\n                            \"componentProps\": {\n                              \"variant\": \"subtle\",\n                              \"theme\": \"red\",\n                              \"size\": \"lg\",\n                              \"label\": \"Clear Selection\"\n                            },\n                            \"componentSlots\": {\n                              \"prefix\": {\n                                \"slotName\": \"prefix\",\n                                \"slotId\": \"Badge-mmnfm85dz:prefix\",\n                                \"slotContent\": \"<svg width=\\\"10px\\\" height=\\\"10px\\\" viewBox=\\\"0 0 36 36\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" aria-hidden=\\\"true\\\" role=\\\"img\\\" class=\\\"iconify iconify--twemoji\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" fill=\\\"#000000\\\"><g id=\\\"SVGRepo_bgCarrier\\\" stroke-width=\\\"0\\\"></g><g id=\\\"SVGRepo_tracerCarrier\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></g><g id=\\\"SVGRepo_iconCarrier\\\"><path fill=\\\"#DD2E44\\\" d=\\\"M21.533 18.002L33.768 5.768a2.5 2.5 0 0 0-3.535-3.535L17.998 14.467L5.764 2.233a2.498 2.498 0 0 0-3.535 0a2.498 2.498 0 0 0 0 3.535l12.234 12.234L2.201 30.265a2.498 2.498 0 0 0 1.768 4.267c.64 0 1.28-.244 1.768-.732l12.262-12.263l12.234 12.234a2.493 2.493 0 0 0 1.768.732a2.5 2.5 0 0 0 1.768-4.267L21.533 18.002z\\\"></path></g></svg>\",\n                                \"parentBlockId\": \"Badge-mmnfm85dz\"\n                              }\n                            },\n                            \"componentEvents\": {\n                              \"click\": {\n                                \"event\": \"click\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"selectedWH.value = '';\"\n                              },\n                              \"mouseover\": {\n                                \"event\": \"change\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"event.currentTarget.style.cursor = 'pointer'; \\nevent.currentTarget.style.transform = 'scale(1.05)';\\nevent.currentTarget.style.boxShadow = 'rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.1) 0px 4px 6px -4px';\"\n                              },\n                              \"mouseout\": {\n                                \"event\": \"focus\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"event.currentTarget.style.cursor = 'default';\\nevent.currentTarget.style.transform = 'scale(1)';\\nevent.currentTarget.style.boxShadow = '';\"\n                              }\n                            },\n                            \"blockName\": \"Badge\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"width\": \"fit-content\",\n                              \"margin\": \"5px\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {},\n                            \"tabletStyles\": {},\n                            \"classes\": [],\n                            \"parentSlotName\": \"right\"\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"flexShrink\": 0,\n                          \"height\": \"fit-content\",\n                          \"position\": \"relative\",\n                          \"justifyContent\": \"space-between\",\n                          \"alignItems\": \"center\",\n                          \"flexWrap\": \"wrap\",\n                          \"gap\": \"10px\",\n                          \"paddingTop\": \"10px\",\n                          \"paddingBottom\": \"10px\",\n                          \"paddingLeft\": \"30px\",\n                          \"paddingRight\": \"30px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"gap\": \"5px\",\n                          \"paddingTop\": \"10px\",\n                          \"paddingBottom\": \"10px\",\n                          \"paddingLeft\": \"20px\",\n                          \"paddingRight\": \"20px\",\n                          \"flexShrink\": 1\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-64lpbe19g\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-zniip1gjn\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"fontSize\": \"text-sm\",\n                              \"fontWeight\": \"font-normal\",\n                              \"text\": \"Click the items for editing the quantity.\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {},\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {},\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"flexShrink\": 0,\n                          \"overflow\": \"hidden\",\n                          \"position\": \"static\",\n                          \"height\": \"30px\",\n                          \"justifyContent\": \"flex-start\",\n                          \"alignItems\": \"center\",\n                          \"gap\": \"20px\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"40px\",\n                          \"paddingRight\": \"40px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {},\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-09k1ls8rp\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"Repeater-lp4qy3yoz\",\n                            \"componentName\": \"Repeater\",\n                            \"componentProps\": {\n                              \"data\": \"{{ selectedWHbins }}\",\n                              \"dataKey\": \"name\",\n                              \"emptyStateMessage\": \"No matching items found.\"\n                            },\n                            \"componentSlots\": {\n                              \"default\": {\n                                \"slotName\": \"default\",\n                                \"slotContent\": [\n                                  {\n                                    \"componentId\": \"item-wrapper-d9sfg8h\",\n                                    \"componentName\": \"container\",\n                                    \"componentProps\": {},\n                                    \"componentSlots\": {},\n                                    \"componentEvents\": {\n                                      \"click\": {\n                                        \"event\": \"click\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"console.log(\\\"nweQuantity\\\", newQuantity.value)\\nnewQuantity.value = 0\\nconsole.log(\\\"edit button clicked-\\\", \\\"---\\\", dataItem.item_code );\\nconsole.log(\\\"data item-\\\", \\\"---\\\", dataItem );\\nselectedItem.value = [];\\neditingBinsItem.value = dataItem;\\nconst foundItems = items.data.filter(item => item.item_code === dataItem.item_code);\\n// Check if we found a matching item\\nif (foundItems.length > 0) {\\n  // Get the first item object from the filtered array\\n  const matchedItem = foundItems[0];\\n  // Add the new 'qty' property to this object\\n  matchedItem.current_qty = dataItem.actual_qty;\\n  matchedItem.warehouse = dataItem.warehouse;\\n  // Assign the modified array (with the item that now has the .qty property)\\n  selectedItem.value = [matchedItem];\\n} else {\\n  // If no item was found, set selectedItem to an empty array\\n  selectedItem.value = [];\\n}\\n\\nnewQuantity.value = dataItem.actual_qty;\\nisEditDialogOpen.value = true;\\nstockRecoPurpose.value = \\\"Stock Reconciliation\\\"\\nconsole.log(\\\"selectedItem: \\\", selectedItem.value)\\nconsole.log(\\\"------end edit button click\\\")\"\n                                      },\n                                      \"mouseover\": {\n                                        \"event\": \"mouseover\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"event.currentTarget.style.transform = 'scale(1.05)';\\nconst itemsIcon = event.currentTarget.children[0];\\nconst editOverlay = event.currentTarget.children[1];\\nif (itemsIcon) {\\n  itemsIcon.style.filter = 'blur(3px)';\\n}\\nif (editOverlay) {\\n  editOverlay.style.opacity = '1';\\n}\"\n                                      },\n                                      \"mouseout\": {\n                                        \"event\": \"mouseout\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"event.currentTarget.style.transform = 'scale(1)';\\nconst itemsIcon = event.currentTarget.children[0];\\nconst editOverlay = event.currentTarget.children[1];\\nif (itemsIcon) {\\n  itemsIcon.style.filter = 'none';\\n}\\nif (editOverlay) {\\n  editOverlay.style.opacity = '0';\\n}\"\n                                      },\n                                      \"undefined\": {\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"selectedItem.value = dataItem;\\nselectedItemBins.value = bins.data.filter(bin => bin.item_code === dataItem.item_code);\"\n                                      },\n                                      \"keydown\": {\n                                        \"event\": \"keydown\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"page.variables.selectedItem = dataItem;\\npage.variables.selectedItemBins = bins.data.filter(bin => bin.item_code === dataItem.item_code);\"\n                                      }\n                                    },\n                                    \"blockName\": \"container\",\n                                    \"children\": [\n                                      {\n                                        \"componentId\": \"itemsicon-pvl1tuyfw\",\n                                        \"componentName\": \"itemsicon\",\n                                        \"componentProps\": {\n                                          \"iconImage\": \"{{ dataItem.image }}\",\n                                          \"titleText\": \"{{ dataItem.item_name }}\",\n                                          \"subTitleText\": \"Quantity: {{ dataItem.actual_qty }}\"\n                                        },\n                                        \"componentSlots\": {},\n                                        \"componentEvents\": {},\n                                        \"blockName\": \"itemsicon\",\n                                        \"children\": [],\n                                        \"baseStyles\": {\n                                          \"transition\": \"filter 0.2s ease-in-out\"\n                                        },\n                                        \"rawStyles\": {},\n                                        \"mobileStyles\": {\n                                          \"width\": \"140px\",\n                                          \"flexShrink\": 0\n                                        },\n                                        \"tabletStyles\": {},\n                                        \"classes\": [],\n                                        \"isStudioComponent\": true\n                                      },\n                                      {\n                                        \"componentId\": \"edit-overlay-j5kfls3\",\n                                        \"componentName\": \"TextBlock\",\n                                        \"componentProps\": {\n                                          \"text\": \"Edit\"\n                                        },\n                                        \"componentSlots\": {},\n                                        \"componentEvents\": {},\n                                        \"blockName\": \"TextBlock\",\n                                        \"children\": [],\n                                        \"baseStyles\": {\n                                          \"position\": \"absolute\",\n                                          \"color\": \"white\",\n                                          \"backgroundColor\": \"rgba(0, 0, 0, 0.5)\",\n                                          \"padding\": \"6px 12px\",\n                                          \"borderRadius\": \"4px\",\n                                          \"fontWeight\": \"font-bold\",\n                                          \"opacity\": 0,\n                                          \"transition\": \"opacity 0.2s ease-in-out\",\n                                          \"pointerEvents\": \"none\"\n                                        },\n                                        \"rawStyles\": {},\n                                        \"mobileStyles\": {},\n                                        \"tabletStyles\": {},\n                                        \"classes\": []\n                                      }\n                                    ],\n                                    \"baseStyles\": {\n                                      \"minHeight\": \"200px\",\n                                      \"height\": \"fit-content\",\n                                      \"position\": \"relative\",\n                                      \"cursor\": \"pointer\",\n                                      \"display\": \"flex\",\n                                      \"justifyContent\": \"center\",\n                                      \"alignItems\": \"center\",\n                                      \"transition\": \"transform 0.2s ease-in-out\"\n                                    },\n                                    \"rawStyles\": {},\n                                    \"mobileStyles\": {\n                                      \"width\": \"fit-content\",\n                                      \"minHeight\": \"0px\"\n                                    },\n                                    \"tabletStyles\": {},\n                                    \"classes\": []\n                                  }\n                                ],\n                                \"slotId\": \"Repeater-lp4qy3yoz:default\",\n                                \"parentBlockId\": \"Repeater-lp4qy3yoz\"\n                              }\n                            },\n                            \"componentEvents\": {},\n                            \"blockName\": \"Repeater\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"display\": \"grid\",\n                              \"gridTemplateColumns\": \"repeat(auto-fill, minmax(160px, 1fr))\",\n                              \"gap\": \"16px\",\n                              \"padding\": \"16px 24px\",\n                              \"alignItems\": \"start\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"display\": \"flex\",\n                              \"flexDirection\": \"row\",\n                              \"flexWrap\": \"nowrap\",\n                              \"overflowX\": \"auto\",\n                              \"gridTemplateColumns\": \"none\",\n                              \"paddingTop\": \"8px\",\n                              \"paddingBottom\": \"8px\",\n                              \"paddingLeft\": \"24px\",\n                              \"paddingRight\": \"24px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": [\n                              \"\"\n                            ]\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"width\": \"100%\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingRight\": \"0px\",\n                          \"paddingBottom\": \"200px\",\n                          \"paddingLeft\": \"0px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"gridTemplateColumns\": \"repeat(auto-fill, minmax(200px, 1fr))\",\n                          \"gap\": \"10px\",\n                          \"gridAutoColumns\": \"minmax(200px, 1fr)\",\n                          \"gridTemplateRows\": \"repeat(1, minmax(0, 1fr))\",\n                          \"gridAutoRows\": \"minmax(0, 1fr)\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"10px\",\n                          \"paddingRight\": \"10px\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"flexDirection\": \"column\",\n                      \"position\": \"static\",\n                      \"height\": \"100%\",\n                      \"overflowY\": \"auto\",\n                      \"paddingTop\": \"0px\",\n                      \"paddingLeft\": \"0px\",\n                      \"paddingRight\": \"0px\",\n                      \"paddingBottom\": \"170px\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {\n                      \"overflowY\": \"hidden\"\n                    },\n                    \"tabletStyles\": {},\n                    \"visibilityCondition\": \"selectedWH ? true : false\",\n                    \"classes\": []\n                  }\n                ],\n                \"baseStyles\": {\n                  \"flexGrow\": 1,\n                  \"height\": \"100%\",\n                  \"overflowY\": \"auto\",\n                  \"minHeight\": \"0\",\n                  \"minWidth\": \"0px\",\n                  \"width\": \"55%\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"width\": \"100%\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              }\n            ],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"row\",\n              \"width\": \"100%\",\n              \"height\": \"100%\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {\n              \"flexDirection\": \"column\"\n            },\n            \"tabletStyles\": {},\n            \"classes\": []\n          }\n        ],\n        \"baseStyles\": {\n          \"overflowY\": \"hidden\",\n          \"display\": \"flex\",\n          \"flexDirection\": \"column\",\n          \"justifyContent\": \"flex-start\",\n          \"alignItems\": \"flex-start\",\n          \"flexWrap\": \"nowrap\",\n          \"minHeight\": \"0px\",\n          \"paddingTop\": \"0px\",\n          \"paddingLeft\": \"0px\",\n          \"paddingRight\": \"0px\",\n          \"paddingBottom\": \"50px\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": []\n      },\n      {\n        \"componentId\": \"bottom_bar-7p9orgvhe\",\n        \"componentName\": \"bottom_bar\",\n        \"componentProps\": {\n          \"Text1\": \"Print\",\n          \"Text2\": \"Corrections\",\n          \"Text3\": \"BinEnquiry\",\n          \"Icon1\": \"printer\",\n          \"Icon2\": \"sliders\",\n          \"Icon3\": \"credit-card\"\n        },\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"bottom_bar\",\n        \"children\": [],\n        \"baseStyles\": {},\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": [],\n        \"isStudioComponent\": true\n      }\n    ],\n    \"baseStyles\": {\n      \"display\": \"grid\",\n      \"gridTemplateRows\": \"auto 1fr auto\",\n      \"height\": \"100vh\",\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\",\n      \"position\": \"relative\"\n    },\n    \"rawStyles\": {},\n    \"mobileStyles\": {},\n    \"tabletStyles\": {},\n    \"classes\": []\n  }\n]",
 "client_scripts": [],
 "creation": "2025-10-14 14:41:21.978130",
 "doctype": "Studio Page",
 "draft_blocks": "[\n  {\n    \"componentId\": \"root\",\n    \"componentName\": \"div\",\n    \"componentProps\": {},\n    \"componentSlots\": {},\n    \"componentEvents\": {},\n    \"blockName\": \"div\",\n    \"children\": [\n      {\n        \"componentId\": \"navbar-main\",\n        \"componentName\": \"navbar\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"navbar\",\n        \"children\": [],\n        \"baseStyles\": {\n          \"flexShrink\": 0,\n          \"width\": \"100%\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": [],\n        \"isStudioComponent\": true\n      },\n      {\n        \"componentId\": \"container-hx3j7lvwt\",\n        \"componentName\": \"container\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"container\",\n        \"children\": [\n          {\n            \"componentId\": \"customdialouge-sbppnnutk\",\n            \"componentName\": \"customdialouge\",\n            \"componentProps\": {\n              \"newvalue\": \"\",\n              \"warehouse_name\": \"{{ selectedItem[0].warehouse }}\",\n              \"current_qty\": \"{{ selectedItem[0].current_qty }}\",\n              \"iconImage\": \"{{ selectedItem[0].image}}\",\n              \"titleText\": \"{{ selectedItem[0].item_name}}\",\n              \"subTitleText\": \"{{ selectedItem[0].item_code}}\",\n              \"isOpen\": \"{{ isEditDialogOpen }}\",\n              \"newQty\": \"{{ newQuantity }}\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {\n              \"blur\": {\n                \"event\": \"blur\",\n                \"action\": \"Run Script\",\n                \"script\": \"// In the \\\"Run Script\\\" action for the \\\"document-created\\\" event\\nconst { doctype, docname } = event.detail;\\n\\nfrappe.call({\\n\u00a0 method: \\\"wms.api.api.submitDoc\\\", // Make sure this path is correct!\\n\u00a0 args: {\\n\u00a0 \u00a0 doctype: doctype,\\n\u00a0 \u00a0 docname: docname\\n\u00a0 },\\n\u00a0 callback: function(response) {\\n\u00a0 \u00a0 if (response.message) {\\n\u00a0 \u00a0 \u00a0 // \u2705 Use the new method from the documentation!\\n\u00a0 \u00a0 \u00a0 studio.showToast({\\n\u00a0 \u00a0 \u00a0 \u00a0 message: response.message,\\n\u00a0 \u00a0 \u00a0 \u00a0 type: \\\"success\\\" \\n\u00a0 \u00a0 \u00a0 });\\n\u00a0 \u00a0 \u00a0 // You can also close your dialog here if needed\\n\u00a0 \u00a0 \u00a0 // isEditDialogOpen.value = false;\\n\u00a0 \u00a0 }\\n\u00a0 },\\n\u00a0 error: function(err) {\\n\u00a0 \u00a0 // Also handle errors with a toast\\n\u00a0 \u00a0 studio.showToast({\\n\u00a0 \u00a0 \u00a0 \u00a0 title: \\\"Submission Failed\\\",\\n\u00a0 \u00a0 \u00a0 \u00a0 message: err.message,\\n\u00a0 \u00a0 \u00a0 \u00a0 type: \\\"error\\\"\\n\u00a0 \u00a0 \u00a0 });\\n\u00a0 }\\n});\"\n              }\n            },\n            \"blockName\": \"customdialouge\",\n            \"children\": [],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"row\",\n              \"justifyContent\": \"center\",\n              \"alignItems\": \"center\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {},\n            \"tabletStyles\": {},\n            \"visibilityCondition\": \"\",\n            \"classes\": [\n              \"\\\"shadow-xl\\\"\",\n              \"\\\"transition-all\\\"\",\n              \"\\\"duration-300\\\"\",\n              \"\\\"ease-in-out\\\"\",\n              \"\\\"{{ inputs.isOpen ? 'opacity-100 scale-100' : 'opacity-0 scale-95' }}\\\"\"\n            ],\n            \"isStudioComponent\": true\n          }\n        ],\n        \"baseStyles\": {\n          \"display\": \"flex\",\n          \"flexDirection\": \"column\",\n          \"flexShrink\": 0,\n          \"height\": \"fit-content\",\n          \"width\": \"100%\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\",\n          \"position\": \"absolute\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"visibilityCondition\": \"isEditDialogOpen\",\n        \"originalElement\": \"div\",\n        \"classes\": [\n          \"\\\"transition-opacity\\\"\",\n          \"\\\"duration-300\\\"\",\n          \"\\\"ease-in-out\\\"\",\n          \"\\\"{{ inputs.isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none' }}\\\"\"\n        ]\n      },\n      {\n        \"componentId\": \"main-content-area\",\n        \"componentName\": \"container\",\n        \"componentProps\": {},\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"container\",\n        \"children\": [\n          {\n            \"componentId\": \"initial-search-view\",\n            \"componentName\": \"container\",\n            \"componentProps\": {\n              \"displayLogic\": \"return !page.variables.searchPerformed;\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {},\n            \"blockName\": \"container\",\n            \"children\": [\n              {\n                \"componentId\": \"TextBlock-4c5iojk6y\",\n                \"componentName\": \"TextBlock\",\n                \"componentProps\": {\n                  \"text\": \"Filter Bin by Warehouse Name.\",\n                  \"textColor\": \"text-gray-500\"\n                },\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"TextBlock\",\n                \"children\": [],\n                \"baseStyles\": {\n                  \"marginTop\": \"8px\",\n                  \"marginBottom\": \"24px\",\n                  \"height\": \"fit-content\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"marginTop\": \"8px\",\n                  \"marginRight\": \"0px\",\n                  \"marginBottom\": \"8px\",\n                  \"marginLeft\": \"0px\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              },\n              {\n                \"componentId\": \"TextInput-glx7nfh3r\",\n                \"componentName\": \"TextInput\",\n                \"componentProps\": {\n                  \"placeholder\": \"Enter Warehouse name to search...\",\n                  \"variant\": \"subtle\",\n                  \"modelValue\": {\n                    \"$type\": \"variable\",\n                    \"name\": \"searchWH\"\n                  }\n                },\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"TextInput\",\n                \"children\": [],\n                \"baseStyles\": {\n                  \"width\": \"100%\",\n                  \"maxWidth\": \"600px\",\n                  \"height\": \"fit-content\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {},\n                \"tabletStyles\": {},\n                \"classes\": []\n              }\n            ],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"column\",\n              \"alignItems\": \"center\",\n              \"justifyContent\": \"flex-start\",\n              \"flexGrow\": 1,\n              \"padding\": \"20px\",\n              \"height\": \"fit-content\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {\n              \"paddingTop\": \"10px\",\n              \"paddingBottom\": \"10px\",\n              \"paddingLeft\": \"20px\",\n              \"paddingRight\": \"20px\"\n            },\n            \"tabletStyles\": {},\n            \"classes\": []\n          },\n          {\n            \"componentId\": \"results-split-view\",\n            \"componentName\": \"container\",\n            \"componentProps\": {\n              \"displayLogic\": \"return page.variables.searchPerformed;\"\n            },\n            \"componentSlots\": {},\n            \"componentEvents\": {},\n            \"blockName\": \"container\",\n            \"children\": [\n              {\n                \"componentId\": \"manual-left-pane\",\n                \"componentName\": \"container\",\n                \"componentProps\": {},\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"container\",\n                \"children\": [\n                  {\n                    \"componentId\": \"container-xzph5zr37\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {},\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"container-v1vxv79e5\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-8bgtf3bak\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"text\": \"Warehouse List\",\n                              \"fontSize\": \"text-xl\",\n                              \"fontWeight\": \"font-semibold\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"padding\": \"16px\",\n                              \"borderBottomWidth\": \"1px\",\n                              \"borderColor\": \"#e5e7eb\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"padding\": \"5px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"column\",\n                          \"flexShrink\": 0,\n                          \"height\": \"fit-content\",\n                          \"width\": \"100%\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"justifyContent\": \"flex-start\",\n                          \"alignItems\": \"center\",\n                          \"flexWrap\": \"nowrap\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-qaanb1tpn\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"Repeater-4j64x6huj\",\n                            \"componentName\": \"Repeater\",\n                            \"componentProps\": {\n                              \"data\": \"{{ filteredWHList }}\",\n                              \"dataKey\": \"warehouse_name\",\n                              \"emptyStateMessage\": \"No matching warehouses found.\"\n                            },\n                            \"componentSlots\": {\n                              \"default\": {\n                                \"slotName\": \"default\",\n                                \"slotId\": \"Repeater-4j64x6huj:default\",\n                                \"slotContent\": [\n                                  {\n                                    \"componentId\": \"warehousecard-ys4z75zq0\",\n                                    \"componentName\": \"warehousecard\",\n                                    \"componentProps\": {\n                                      \"WarehouseName\": \"{{ dataItem.warehouse_name }}\",\n                                      \"totalQty\": \"{{ dataItem.itemCount }}\",\n                                      \"binsTotal\": \"{{ dataItem.binCount }}\"\n                                    },\n                                    \"componentSlots\": {},\n                                    \"componentEvents\": {\n                                      \"click\": {\n                                        \"event\": \"click\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"const thisWHmatchingBins = bins.data.filter(bin => \\n\u00a0 bin.warehouse === dataItem.name\\n);\\n\\nconst enrichedBins = thisWHmatchingBins.map(bin => {\\n\u00a0 // For each bin, find the corresponding item in the items dataset\\n\u00a0 const matchingItem = items.data.find(item => \\n\u00a0 \u00a0 item.item_code === bin.item_code\\n\u00a0 );\\n\\n\u00a0 // Return a new object that includes all original bin properties (...)\\n\u00a0 // plus the new item_name property.\\n\u00a0 return {\\n\u00a0 \u00a0 ...bin,\\n\u00a0 \u00a0 // Use a ternary operator: if an item is found, add its name, otherwise add null.\\n\u00a0 \u00a0 item_name: matchingItem ? matchingItem.item_name : null,\\n\u00a0 \u00a0 image: matchingItem ? matchingItem.image : null\\n\u00a0 };\\n});\\n\\nselectedWHbins.value = enrichedBins;\\n\\n// const totalQuantity = enrichedBins.reduce((sum, currentBin) => {\\n// \u00a0 return sum + (currentBin.actual_qty || 0);\\n// }, 0); \\n\\nselectedWH.value = dataItem;\\n// selectedWH.value.push({\\n// \u00a0 ...dataItem,\\n// \u00a0 total_qty : totalQuantity,\\n// \u00a0 total_bins: enrichedBins.length\\n// })\\nconsole.log(\\\"selected WH .value\\\", selectedWH.value)\\nconsole.log(\\\"------after clicking WH end----\\\")\\n\"\n                                      }\n                                    },\n                                    \"blockName\": \"warehousecard\",\n                                    \"children\": [],\n                                    \"baseStyles\": {\n                                      \"display\": \"flex\"\n                                    },\n                                    \"rawStyles\": {},\n                                    \"mobileStyles\": {\n                                      \"width\": \"180px\",\n                                      \"height\": \"auto\",\n                                      \"flexShrink\": 0,\n                                      \"fontSize\": \"text-sm\"\n                                    },\n                                    \"tabletStyles\": {},\n                                    \"visibilityCondition\": \"\",\n                                    \"classes\": [],\n                                    \"parentSlotName\": \"default\",\n                                    \"isStudioComponent\": true\n                                  }\n                                ],\n                                \"parentBlockId\": \"Repeater-4j64x6huj\"\n                              }\n                            },\n                            \"componentEvents\": {},\n                            \"blockName\": \"Repeater\",\n                            \"children\": [],\n                            \"baseStyles\": {},\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"display\": \"flex\",\n                              \"flexDirection\": \"row\",\n                              \"flexWrap\": \"nowrap\",\n                              \"overflowX\": \"auto\",\n                              \"gap\": \"16px\",\n                              \"padding\": \"16px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"column\",\n                          \"flexShrink\": 0,\n                          \"overflow\": \"hidden\",\n                          \"position\": \"static\",\n                          \"height\": \"fit-content\",\n                          \"width\": \"100%\",\n                          \"paddingTop\": \"20px\",\n                          \"paddingRight\": \"20px\",\n                          \"paddingBottom\": \"200px\",\n                          \"paddingLeft\": \"20px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"paddingTop\": \"0px\",\n                          \"paddingRight\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"0px\",\n                          \"overflowY\": \"visible\",\n                          \"height\": \"auto\",\n                          \"alignItems\": \"stretch\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"flexDirection\": \"column\",\n                      \"overflowY\": \"auto\",\n                      \"justifyContent\": \"flex-start\",\n                      \"alignItems\": \"center\",\n                      \"height\": \"100%\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {\n                      \"flexDirection\": \"column\"\n                    },\n                    \"tabletStyles\": {},\n                    \"classes\": []\n                  }\n                ],\n                \"baseStyles\": {\n                  \"width\": \"45%\",\n                  \"flexShrink\": 0,\n                  \"borderRight\": \"1px solid #e5e7eb\",\n                  \"display\": \"flex\",\n                  \"flexDirection\": \"column\",\n                  \"height\": \"100%\",\n                  \"overflowY\": \"auto\",\n                  \"minHeight\": \"0\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"display\": \"flex\",\n                  \"width\": \"100%\",\n                  \"height\": \"auto\",\n                  \"borderRight\": \"none\",\n                  \"borderBottom\": \"1px solid #e5e7eb\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              },\n              {\n                \"componentId\": \"manual-right-pane\",\n                \"componentName\": \"container\",\n                \"componentProps\": {},\n                \"componentSlots\": {},\n                \"componentEvents\": {},\n                \"blockName\": \"container\",\n                \"children\": [\n                  {\n                    \"componentId\": \"container-u5xpssspq\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {\n                      \"displayLogic\": \"return !page.variables.selectedItem\"\n                    },\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"TextBlock-rx9fgp639\",\n                        \"componentName\": \"TextBlock\",\n                        \"componentProps\": {\n                          \"text\": \"Select a warehouse on left to see items.\",\n                          \"textColor\": \"text-gray-500\"\n                        },\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"TextBlock\",\n                        \"children\": [],\n                        \"baseStyles\": {},\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {},\n                        \"tabletStyles\": {},\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"alignItems\": \"center\",\n                      \"justifyContent\": \"center\",\n                      \"padding\": \"40px\",\n                      \"height\": \"fit-content\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {},\n                    \"tabletStyles\": {},\n                    \"visibilityCondition\": \"selectedWH ? false : true\",\n                    \"classes\": []\n                  },\n                  {\n                    \"componentId\": \"container-yj017vyif\",\n                    \"componentName\": \"container\",\n                    \"componentProps\": {},\n                    \"componentSlots\": {},\n                    \"componentEvents\": {},\n                    \"blockName\": \"container\",\n                    \"children\": [\n                      {\n                        \"componentId\": \"container-qsrds94rb\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-wdy5a7zn5\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"text\": \"Items for Warehouse: {{ selectedWH[0].warehouse_name }}\",\n                              \"fontSize\": \"text-lg\",\n                              \"fontWeight\": \"font-medium\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"fontSize\": \"text-xl\",\n                              \"fontWeight\": \"font-bold\",\n                              \"borderBottomWidth\": \"1px\",\n                              \"borderColor\": \"#e5e7eb\",\n                              \"flexShrink\": 0,\n                              \"width\": \"fit-content\",\n                              \"padding\": \"10px\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"fontSize\": \"text-lg\",\n                              \"fontWeight\": \"font-bold\",\n                              \"flexShrink\": 1\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          },\n                          {\n                            \"componentId\": \"Badge-mmnfm85dz\",\n                            \"componentName\": \"Badge\",\n                            \"componentProps\": {\n                              \"variant\": \"subtle\",\n                              \"theme\": \"red\",\n                              \"size\": \"lg\",\n                              \"label\": \"Clear Selection\"\n                            },\n                            \"componentSlots\": {\n                              \"prefix\": {\n                                \"slotName\": \"prefix\",\n                                \"slotId\": \"Badge-mmnfm85dz:prefix\",\n                                \"slotContent\": \"<svg width=\\\"10px\\\" height=\\\"10px\\\" viewBox=\\\"0 0 36 36\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" aria-hidden=\\\"true\\\" role=\\\"img\\\" class=\\\"iconify iconify--twemoji\\\" preserveAspectRatio=\\\"xMidYMid meet\\\" fill=\\\"#000000\\\"><g id=\\\"SVGRepo_bgCarrier\\\" stroke-width=\\\"0\\\"></g><g id=\\\"SVGRepo_tracerCarrier\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"></g><g id=\\\"SVGRepo_iconCarrier\\\"><path fill=\\\"#DD2E44\\\" d=\\\"M21.533 18.002L33.768 5.768a2.5 2.5 0 0 0-3.535-3.535L17.998 14.467L5.764 2.233a2.498 2.498 0 0 0-3.535 0a2.498 2.498 0 0 0 0 3.535l12.234 12.234L2.201 30.265a2.498 2.498 0 0 0 1.768 4.267c.64 0 1.28-.244 1.768-.732l12.262-12.263l12.234 12.234a2.493 2.493 0 0 0 1.768.732a2.5 2.5 0 0 0 1.768-4.267L21.533 18.002z\\\"></path></g></svg>\",\n                                \"parentBlockId\": \"Badge-mmnfm85dz\"\n                              }\n                            },\n                            \"componentEvents\": {\n                              \"click\": {\n                                \"event\": \"click\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"selectedWH.value = '';\"\n                              },\n                              \"mouseover\": {\n                                \"event\": \"change\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"event.currentTarget.style.cursor = 'pointer'; \\nevent.currentTarget.style.transform = 'scale(1.05)';\\nevent.currentTarget.style.boxShadow = 'rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.1) 0px 4px 6px -4px';\"\n                              },\n                              \"mouseout\": {\n                                \"event\": \"focus\",\n                                \"action\": \"Run Script\",\n                                \"script\": \"event.currentTarget.style.cursor = 'default';\\nevent.currentTarget.style.transform = 'scale(1)';\\nevent.currentTarget.style.boxShadow = '';\"\n                              }\n                            },\n                            \"blockName\": \"Badge\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"width\": \"fit-content\",\n                              \"margin\": \"5px\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {},\n                            \"tabletStyles\": {},\n                            \"classes\": [],\n                            \"parentSlotName\": \"right\"\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"flexShrink\": 0,\n                          \"height\": \"fit-content\",\n                          \"position\": \"relative\",\n                          \"justifyContent\": \"space-between\",\n                          \"alignItems\": \"center\",\n                          \"flexWrap\": \"wrap\",\n                          \"gap\": \"10px\",\n                          \"paddingTop\": \"10px\",\n                          \"paddingBottom\": \"10px\",\n                          \"paddingLeft\": \"30px\",\n                          \"paddingRight\": \"30px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"gap\": \"5px\",\n                          \"paddingTop\": \"10px\",\n                          \"paddingBottom\": \"10px\",\n                          \"paddingLeft\": \"20px\",\n                          \"paddingRight\": \"20px\",\n                          \"flexShrink\": 1\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-64lpbe19g\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"TextBlock-zniip1gjn\",\n                            \"componentName\": \"TextBlock\",\n                            \"componentProps\": {\n                              \"fontSize\": \"text-sm\",\n                              \"fontWeight\": \"font-normal\",\n                              \"text\": \"Click the items for editing the quantity.\"\n                            },\n                            \"componentSlots\": {},\n                            \"componentEvents\": {},\n                            \"blockName\": \"TextBlock\",\n                            \"children\": [],\n                            \"baseStyles\": {},\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {},\n                            \"tabletStyles\": {},\n                            \"classes\": []\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"flexShrink\": 0,\n                          \"overflow\": \"hidden\",\n                          \"position\": \"static\",\n                          \"height\": \"30px\",\n                          \"justifyContent\": \"flex-start\",\n                          \"alignItems\": \"center\",\n                          \"gap\": \"20px\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"40px\",\n                          \"paddingRight\": \"40px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {},\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      },\n                      {\n                        \"componentId\": \"container-09k1ls8rp\",\n                        \"componentName\": \"container\",\n                        \"componentProps\": {},\n                        \"componentSlots\": {},\n                        \"componentEvents\": {},\n                        \"blockName\": \"container\",\n                        \"children\": [\n                          {\n                            \"componentId\": \"Repeater-lp4qy3yoz\",\n                            \"componentName\": \"Repeater\",\n                            \"componentProps\": {\n                              \"data\": \"{{ selectedWHbins }}\",\n                              \"dataKey\": \"name\",\n                              \"emptyStateMessage\": \"No matching items found.\"\n                            },\n                            \"componentSlots\": {\n                              \"default\": {\n                                \"slotName\": \"default\",\n                                \"slotContent\": [\n                                  {\n                                    \"componentId\": \"item-wrapper-d9sfg8h\",\n                                    \"componentName\": \"container\",\n                                    \"componentProps\": {},\n                                    \"componentSlots\": {},\n                                    \"componentEvents\": {\n                                      \"click\": {\n                                        \"event\": \"click\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"console.log(\\\"nweQuantity\\\", newQuantity.value)\\nnewQuantity.value = 0\\nconsole.log(\\\"edit button clicked-\\\", \\\"---\\\", dataItem.item_code );\\nconsole.log(\\\"data item-\\\", \\\"---\\\", dataItem );\\nselectedItem.value = [];\\neditingBinsItem.value = dataItem;\\nconst foundItems = items.data.filter(item => item.item_code === dataItem.item_code);\\n// Check if we found a matching item\\nif (foundItems.length > 0) {\\n  // Get the first item object from the filtered array\\n  const matchedItem = foundItems[0];\\n  // Add the new 'qty' property to this object\\n  matchedItem.current_qty = dataItem.actual_qty;\\n  matchedItem.warehouse = dataItem.warehouse;\\n  // Assign the modified array (with the item that now has the .qty property)\\n  selectedItem.value = [matchedItem];\\n} else {\\n  // If no item was found, set selectedItem to an empty array\\n  selectedItem.value = [];\\n}\\n\\nnewQuantity.value = dataItem.actual_qty;\\nisEditDialogOpen.value = true;\\nstockRecoPurpose.value = \\\"Stock Reconciliation\\\"\\nconsole.log(\\\"selectedItem: \\\", selectedItem.value)\\nconsole.log(\\\"------end edit button click\\\")\"\n                                      },\n                                      \"mouseover\": {\n                                        \"event\": \"mouseover\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"event.currentTarget.style.transform = 'scale(1.05)';\\nconst itemsIcon = event.currentTarget.children[0];\\nconst editOverlay = event.currentTarget.children[1];\\nif (itemsIcon) {\\n  itemsIcon.style.filter = 'blur(3px)';\\n}\\nif (editOverlay) {\\n  editOverlay.style.opacity = '1';\\n}\"\n                                      },\n                                      \"mouseout\": {\n                                        \"event\": \"mouseout\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"event.currentTarget.style.transform = 'scale(1)';\\nconst itemsIcon = event.currentTarget.children[0];\\nconst editOverlay = event.currentTarget.children[1];\\nif (itemsIcon) {\\n  itemsIcon.style.filter = 'none';\\n}\\nif (editOverlay) {\\n  editOverlay.style.opacity = '0';\\n}\"\n                                      },\n                                      \"undefined\": {\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"selectedItem.value = dataItem;\\nselectedItemBins.value = bins.data.filter(bin => bin.item_code === dataItem.item_code);\"\n                                      },\n                                      \"keydown\": {\n                                        \"event\": \"keydown\",\n                                        \"action\": \"Run Script\",\n                                        \"script\": \"page.variables.selectedItem = dataItem;\\npage.variables.selectedItemBins = bins.data.filter(bin => bin.item_code === dataItem.item_code);\"\n                                      }\n                                    },\n                                    \"blockName\": \"container\",\n                                    \"children\": [\n                                      {\n                                        \"componentId\": \"itemsicon-pvl1tuyfw\",\n                                        \"componentName\": \"itemsicon\",\n                                        \"componentProps\": {\n                                          \"iconImage\": \"{{ dataItem.image }}\",\n                                          \"titleText\": \"{{ dataItem.item_name }}\",\n                                          \"subTitleText\": \"Quantity: {{ dataItem.actual_qty }}\"\n                                        },\n                                        \"componentSlots\": {},\n                                        \"componentEvents\": {},\n                                        \"blockName\": \"itemsicon\",\n                                        \"children\": [],\n                                        \"baseStyles\": {\n                                          \"transition\": \"filter 0.2s ease-in-out\"\n                                        },\n                                        \"rawStyles\": {},\n                                        \"mobileStyles\": {\n                                          \"width\": \"140px\",\n                                          \"flexShrink\": 0\n                                        },\n                                        \"tabletStyles\": {},\n                                        \"classes\": [],\n                                        \"isStudioComponent\": true\n                                      },\n                                      {\n                                        \"componentId\": \"edit-overlay-j5kfls3\",\n                                        \"componentName\": \"TextBlock\",\n                                        \"componentProps\": {\n                                          \"text\": \"Edit\"\n                                        },\n                                        \"componentSlots\": {},\n                                        \"componentEvents\": {},\n                                        \"blockName\": \"TextBlock\",\n                                        \"children\": [],\n                                        \"baseStyles\": {\n                                          \"position\": \"absolute\",\n                                          \"color\": \"white\",\n                                          \"backgroundColor\": \"rgba(0, 0, 0, 0.5)\",\n                                          \"padding\": \"6px 12px\",\n                                          \"borderRadius\": \"4px\",\n                                          \"fontWeight\": \"font-bold\",\n                                          \"opacity\": 0,\n                                          \"transition\": \"opacity 0.2s ease-in-out\",\n                                          \"pointerEvents\": \"none\"\n                                        },\n                                        \"rawStyles\": {},\n                                        \"mobileStyles\": {},\n                                        \"tabletStyles\": {},\n                                        \"classes\": []\n                                      }\n                                    ],\n                                    \"baseStyles\": {\n                                      \"minHeight\": \"200px\",\n                                      \"height\": \"fit-content\",\n                                      \"position\": \"relative\",\n                                      \"cursor\": \"pointer\",\n                                      \"display\": \"flex\",\n                                      \"justifyContent\": \"center\",\n                                      \"alignItems\": \"center\",\n                                      \"transition\": \"transform 0.2s ease-in-out\"\n                                    },\n                                    \"rawStyles\": {},\n                                    \"mobileStyles\": {\n                                      \"width\": \"fit-content\",\n                                      \"minHeight\": \"0px\"\n                                    },\n                                    \"tabletStyles\": {},\n                                    \"classes\": []\n                                  }\n                                ],\n                                \"slotId\": \"Repeater-lp4qy3yoz:default\",\n                                \"parentBlockId\": \"Repeater-lp4qy3yoz\"\n                              }\n                            },\n                            \"componentEvents\": {},\n                            \"blockName\": \"Repeater\",\n                            \"children\": [],\n                            \"baseStyles\": {\n                              \"display\": \"grid\",\n                              \"gridTemplateColumns\": \"repeat(auto-fill, minmax(160px, 1fr))\",\n                              \"gap\": \"16px\",\n                              \"padding\": \"16px 24px\",\n                              \"alignItems\": \"start\"\n                            },\n                            \"rawStyles\": {},\n                            \"mobileStyles\": {\n                              \"display\": \"flex\",\n                              \"flexDirection\": \"row\",\n                              \"flexWrap\": \"nowrap\",\n                              \"overflowX\": \"auto\",\n                              \"gridTemplateColumns\": \"none\",\n                              \"paddingTop\": \"8px\",\n                              \"paddingBottom\": \"8px\",\n                              \"paddingLeft\": \"24px\",\n                              \"paddingRight\": \"24px\"\n                            },\n                            \"tabletStyles\": {},\n                            \"classes\": [\n                              \"\"\n                            ]\n                          }\n                        ],\n                        \"baseStyles\": {\n                          \"width\": \"100%\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingRight\": \"0px\",\n                          \"paddingBottom\": \"200px\",\n                          \"paddingLeft\": \"0px\"\n                        },\n                        \"rawStyles\": {},\n                        \"mobileStyles\": {\n                          \"display\": \"flex\",\n                          \"flexDirection\": \"row\",\n                          \"gridTemplateColumns\": \"repeat(auto-fill, minmax(200px, 1fr))\",\n                          \"gap\": \"10px\",\n                          \"gridAutoColumns\": \"minmax(200px, 1fr)\",\n                          \"gridTemplateRows\": \"repeat(1, minmax(0, 1fr))\",\n                          \"gridAutoRows\": \"minmax(0, 1fr)\",\n                          \"paddingTop\": \"0px\",\n                          \"paddingBottom\": \"0px\",\n                          \"paddingLeft\": \"10px\",\n                          \"paddingRight\": \"10px\"\n                        },\n                        \"tabletStyles\": {},\n                        \"originalElement\": \"div\",\n                        \"classes\": []\n                      }\n                    ],\n                    \"baseStyles\": {\n                      \"display\": \"flex\",\n                      \"flexDirection\": \"column\",\n                      \"position\": \"static\",\n                      \"height\": \"100%\",\n                      \"overflowY\": \"auto\",\n                      \"paddingTop\": \"0px\",\n                      \"paddingLeft\": \"0px\",\n                      \"paddingRight\": \"0px\",\n                      \"paddingBottom\": \"170px\"\n                    },\n                    \"rawStyles\": {},\n                    \"mobileStyles\": {\n                      \"overflowY\": \"hidden\"\n                    },\n                    \"tabletStyles\": {},\n                    \"visibilityCondition\": \"selectedWH ? true : false\",\n                    \"classes\": []\n                  }\n                ],\n                \"baseStyles\": {\n                  \"flexGrow\": 1,\n                  \"height\": \"100%\",\n                  \"overflowY\": \"auto\",\n                  \"minHeight\": \"0\",\n                  \"minWidth\": \"0px\",\n                  \"width\": \"55%\"\n                },\n                \"rawStyles\": {},\n                \"mobileStyles\": {\n                  \"width\": \"100%\"\n                },\n                \"tabletStyles\": {},\n                \"classes\": []\n              }\n            ],\n            \"baseStyles\": {\n              \"display\": \"flex\",\n              \"flexDirection\": \"row\",\n              \"width\": \"100%\",\n              \"height\": \"100%\"\n            },\n            \"rawStyles\": {},\n            \"mobileStyles\": {\n              \"flexDirection\": \"column\"\n            },\n            \"tabletStyles\": {},\n            \"classes\": []\n          }\n        ],\n        \"baseStyles\": {\n          \"overflowY\": \"hidden\",\n          \"display\": \"flex\",\n          \"flexDirection\": \"column\",\n          \"justifyContent\": \"flex-start\",\n          \"alignItems\": \"flex-start\",\n          \"flexWrap\": \"nowrap\",\n          \"minHeight\": \"0px\",\n          \"paddingTop\": \"0px\",\n          \"paddingLeft\": \"0px\",\n          \"paddingRight\": \"0px\",\n          \"paddingBottom\": \"50px\"\n        },\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": []\n      },\n      {\n        \"componentId\": \"bottom_bar-7p9orgvhe\",\n        \"componentName\": \"bottom_bar\",\n        \"componentProps\": {\n          \"Text1\": \"Print\",\n          \"Text2\": \"Corrections\",\n          \"Text3\": \"BinEnquiry\",\n          \"Icon1\": \"printer\",\n          \"Icon2\": \"sliders\",\n          \"Icon3\": \"credit-card\"\n        },\n        \"componentSlots\": {},\n        \"componentEvents\": {},\n        \"blockName\": \"bottom_bar\",\n        \"children\": [],\n        \"baseStyles\": {},\n        \"rawStyles\": {},\n        \"mobileStyles\": {},\n        \"tabletStyles\": {},\n        \"classes\": [],\n        \"isStudioComponent\": true\n      }\n    ],\n    \"baseStyles\": {\n      \"display\": \"grid\",\n      \"gridTemplateRows\": \"auto 1fr auto\",\n      \"height\": \"100vh\",\n      \"width\": \"100%\",\n      \"overflow\": \"hidden\",\n      \"position\": \"relative\"\n    },\n    \"rawStyles\": {},\n    \"mobileStyles\": {},\n    \"tabletStyles\": {},\n    \"classes\": []\n  }\n]",
 "frappe_app": "wms",
 "is_standard": 1,
 "modified": "2025-10-15 19:28:15.227877",
 "modified_by": "Administrator",
 "name": "bin_enquiry",
 "owner": "anup@demo.com",
 "page_name": "page-bfb5d472",
 "page_title": "Bin Enquiry",
 "published": 1,
 "resources": [
  {
   "document_type": "Item",
   "fields": "[\"item_code\",\"item_name\",\"item_group\",\"stock_uom\",\"description\",\"barcodes\",\"image\"]",
   "filters": "{\"disabled\":[\"=\",\"No\"]}",
   "method": "GET",
   "params": "{}",
   "resource_name": "items",
   "resource_type": "Document List",
   "sort_field": "item_code",
   "sort_order": "ASC",
   "whitelisted_methods": "[]"
  },
  {
   "document_type": "Bin",
   "fields": "[\"item_code\",\"warehouse\",\"actual_qty\",\"planned_qty\",\"indented_qty\",\"ordered_qty\",\"projected_qty\",\"reserved_qty\",\"reserved_qty_for_production\",\"reserved_qty_for_sub_contract\",\"reserved_qty_for_production_plan\",\"reserved_stock\",\"stock_uom\",\"valuation_rate\",\"stock_value\",\"name\"]",
   "filters": "{}",
   "method": "GET",
   "params": "{}",
   "resource_name": "bins",
   "resource_type": "Document List",
   "sort_field": "item_code",
   "sort_order": "ASC",
   "whitelisted_methods": "[]"
  },
  {
   "document_type": "Warehouse",
   "fields": "[\"disabled\",\"warehouse_name\",\"is_group\",\"parent_warehouse\",\"is_rejected_warehouse\",\"account\",\"company\",\"email_id\",\"phone_no\",\"mobile_no\",\"address_line_1\",\"address_line_2\",\"city\",\"state\",\"pin\",\"warehouse_type\",\"default_in_transit_warehouse\",\"lft\",\"rgt\",\"old_parent\",\"name\"]",
   "filters": "{\"disabled\":[\"=\",\"No\"],\"is_group\":[\"=\",\"No\"]}",
   "method": "GET",
   "params": "{}",
   "resource_name": "warehouse",
   "resource_type": "Document List",
   "sort_field": "warehouse_name",
   "sort_order": "ASC",
   "whitelisted_methods": "[]"
  }
 ],
 "route": "/binEnquiry",
 "studio_app": "Warehouse Management System",
 "variables": [
  {
   "initial_value": "[]",
   "variable_name": "filteredWHList",
   "variable_type": "Object"
  },
  {
   "initial_value": "\"\"",
   "variable_name": "searchWH",
   "variable_type": "String"
  },
  {
   "initial_value": "\"{{ warehouse.data }}\"",
   "variable_name": "allWHlist",
   "variable_type": "Object"
  },
  {
   "initial_value": "false",
   "variable_name": "pageInitialized",
   "variable_type": "Boolean"
  },
  {
   "initial_value": "\"{{warehouse.data}}\"",
   "variable_name": "warehouse_copy",
   "variable_type": "Object"
  },
  {
   "initial_value": "[]",
   "variable_name": "selectedWH",
   "variable_type": "Object"
  },
  {
   "initial_value": "[]",
   "variable_name": "selectedWHbins",
   "variable_type": "Object"
  },
  {
   "initial_value": "0",
   "variable_name": "newQuantity",
   "variable_type": "Number"
  },
  {
   "initial_value": "[]",
   "variable_name": "selectedItem",
   "variable_type": "Object"
  },
  {
   "initial_value": "false",
   "variable_name": "isEditDialogOpen",
   "variable_type": "Boolean"
  },
  {
   "initial_value": "\"\"",
   "variable_name": "stockRecoPurpose",
   "variable_type": "String"
  },
  {
   "initial_value": "[]",
   "variable_name": "forSubmitDoc",
   "variable_type": "Object"
  },
  {
   "initial_value": "[]",
   "variable_name": "editingBinsItem",
   "variable_type": "Object"
  }
 ],
 "watchers": [
  {
   "immediate": 1,
   "script": "console.log(\"entered searchwh watcher -----\")\nconsole.log(\"selectedWH :\",selectedWH.value)\nconsole.log(\"000\",warehouse.data[0].hasOwnProperty('total_bins'))\nconst queryString = searchWH.value.trim().toLowerCase();\nconsole.log(queryString)\nif (queryString === \"\") {\n  if (!warehouse.data || warehouse.data.length === 0 || !bins.data) {\n    console.log(\"Data sources are not ready, exiting.\");\n    return; // Safety check\n  } else {\n    filteredWHList.value = warehouse.data;\n    }\n} else {\n  // First, check if the data is valid and has the required property.\n  if (\n    warehouse && \n    warehouse.data && \n    warehouse.data.length > 0 && \n    warehouse.data[0].hasOwnProperty('binCount')\n  ) {\n    // If the data is ready, run the filter.\n    filteredWHList.value = warehouse.data.filter((wh) => {\n      const nameMatches = wh.name ? wh.name.toLowerCase().includes(queryString) : false;\n      return nameMatches;\n    });\n  } else {\n    // If the data is not ready or doesn't have the key, do nothing or clear the list.\n    console.log(\"Warehouse data is not ready or is missing 'total_bins'. Filter skipped.\");\n  }\n}\nconsole.log(\"filteredWHList.value====\" , filteredWHList.value)\nconsole.log(\"allwhlist: \", allWHlist)\nconsole.log(\"-----exited searchwh watcher \")",
   "source": "searchWH"
  },
  {
   "immediate": 1,
   "script": "console.log(\"entered allWHlist watcher========\")\nconsole.log(\"WH data:\", warehouse.data)\nconsole.log(\"allwh data:\", allWHlist)\nconsole.log(\"--- Watcher triggered by warehouseReady ---\");\n\n// We can now work DIRECTLY with the original data source.\n// It's guaranteed to be a loaded array at this point.\nif (!warehouse.data || warehouse.data.length === 0 || !bins.data) {\n    console.log(\"Data sources are not ready, exiting.\");\n    return; // Safety check\n   \n}\npageInitialized.value = true;\nselectedWH.value = null;\nconsole.log(\"Success! warehouse.data is ready to be processed.\");\n\nconst enrichedWarehouses = warehouse.data.map(warehouse => {\n    \n    const matchingBins = bins.data.filter(bin => \n        bin.warehouse === warehouse.name\n    );\n\n    const totalQty = matchingBins.reduce((sum, currentBin) => {\n        // Add a safeguard in case actual_qty is null or undefined\n        return sum + (currentBin.actual_qty || 0);\n    }, 0);\n\n    return {\n        ...warehouse, // Copy original warehouse properties\n        // warehouse_name: warehouse.warehouse_name + \" - UPDATED\", // for check only\n        binCount: matchingBins.length,\n        itemCount: totalQty\n    };\n});\nwarehouse.data = enrichedWarehouses;\n// Assign the final, enriched array to your target variable.\nfilteredWHList.value = enrichedWarehouses;\n\nconsole.log(\"COMPLETED: The filteredWHList has been updated.\", filteredWHList.value);\nconsole.log(\"999---\",warehouse.data[0].hasOwnProperty('binCount'))\nconsole.log(\"======== exited allWHlist watcher\")",
   "source": "allWHlist"
  },
  {
   "immediate": 1,
   "script": "if (isEditDialogOpen.value){\n  selectedItem.value[0].qty = newQuantity.value\n  console.log (\"from watcher newQuantity - selectedItem.value[0].total_qty\", newQuantity.value)\n  console.log (\"from watcher selectedItem.value \", selectedItem.value[0].qty)\n}",
   "source": "newQuantity"
  },
  {
   "immediate": 1,
   "script": "console.log (\"Attempting to submit doc: \", forSubmitDoc.value.docname, \"--\", forSubmitDoc.value.docname)\nif (forSubmitDoc.value.docname){\nasync function postData(url, payload) {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        // This token is mandatory for POST requests and is the reason\n        // this function fails inside an isolated component script.\n        'X-Frappe-CSRF-Token': \"bf47311c198a1741b395f6091e19489b584d69e8d6934fb2f447ac8b\" \n      },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      // If the server responds with an error, try to get more details.\n      const errorData = await response.json();\n      throw new Error(errorData.message || `Failed to Submit Doc. HTTP error! Status: ${response.status}`);\n    }\n\n    // If successful, return the response data.\n    return await response.json();\n\n  } catch (error) {\n    console.error(\"Fetch request failed:\", error);\n    // Re-throw the error so the calling code knows something went wrong.\n    throw error; \n  }\n}\n\n// --- Example of how to use it ---\n// This part would be inside your main page's event handler script.\n\nconst methodUrl = '/api/method/wms.api.api.submitDoc';\nconst dataToSend = { \n  doctype: forSubmitDoc.value.doctype, \n  docname: forSubmitDoc.value.docname \n};\n\npostData(methodUrl, dataToSend)\n  .then(result => {\n    console.log(\"Success:\", result.message);\n    studio.showToast({ message: \"Submission successful!\", type: 'success'});\n    isEditDialogOpen.value = false;\n    \n    selectedWH.value.itemCount = parseFloat(selectedWH.value.itemCount)  + parseFloat(newQuantity.value) - parseFloat(editingBinsItem.value.actual_qty) \n  \n    console.log(\"selectedWH.value\",selectedWH.value)\n    console.log(\"selectedWH.value.itemCount\",selectedWH.value.itemCount)\n    \n    editingBinsItem.value.actual_qty = parseFloat(newQuantity.value) + 0;  // + 0 is  required to eliminate preceeding 0 in newQuantity.value if user inputs 0.\n  })\n  .catch(err => {\n    studio.showToast({ title: \"Error\", message: err.message, type: 'error'});\n    isEditDialogOpen.value = false;\n    \n  });\n}",
   "source": "forSubmitDoc"
  }
 ]
}
